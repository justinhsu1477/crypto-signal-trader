app:
  timezone: Asia/Taipei

server:
  port: ${SERVER_PORT:8080}

spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  datasource:
    url: jdbc:h2:file:./data/trading
    driver-class-name: org.h2.Driver
    username: sa
    password:
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false

binance:
  futures:
    api-key: ${BINANCE_API_KEY:YOUR_API_KEY}
    secret-key: ${BINANCE_SECRET_KEY:YOUR_SECRET_KEY}

  # 風控設定
  risk:
    max-position-usdt: 50000      # 單筆最大名目價值 (USDT) — 防止窄止損產生超大倉位
    max-daily-loss-usdt: 2000     # 每日虧損熔斷上限 (USDT) — 固定值，不隨餘額浮動
    # 動態以損定倉: 1R = 帳戶餘額 × risk-percent, 補倉用 2R
    risk-percent: 0.20            # 單筆風險比例 (20% = 0.20)
    max-dca-per-symbol: 3         # 同幣種最多 3 層（首次入場 + 2 次補倉）
    dca-risk-multiplier: 2.0      # 補倉風險倍數（2R = 首倉的 2 倍風險金額）
    fixed-leverage: 20            # 固定槓桿 (逐倉 ISOLATED)
    default-symbol: BTCUSDT        # 訊號無幣種時的預設交易對（Java 端會 fallback 查 OPEN trade）
    allowed-symbols:              # 允許的交易對清單（可加多個）
      - BTCUSDT

discord:
  webhook:
    url: ${DISCORD_WEBHOOK_URL:}                    # Discord Webhook URL
    enabled: ${DISCORD_WEBHOOK_ENABLED:false}       # 是否啟用通知

stripe:
  secret-key: ${STRIPE_SECRET_KEY:sk_test_placeholder}
  webhook-secret: ${STRIPE_WEBHOOK_SECRET:whsec_placeholder}

jwt:
  secret: ${JWT_SECRET:default-dev-secret-change-in-production-must-be-at-least-256-bits-long}
  expiration-ms: 86400000         # 24h
  refresh-expiration-ms: 604800000  # 7 days

encryption:
  aes-key: ${AES_ENCRYPTION_KEY:default-aes-key-change-in-prod!!}

logging:
  level:
    com.trader: DEBUG
